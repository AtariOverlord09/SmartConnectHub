import os
import asyncio
import logging
import random

from aiogram import Bot, Dispatcher
from aiogram.contrib.fsm_storage.memory import MemoryStorage
from aiogram.contrib.fsm_storage.redis import RedisStorage2
from dotenv import load_dotenv

from tgbot.filters.admin import AdminFilter
from tgbot.handlers.admin import register_admin
from tgbot.handlers.echo import register_echo
from tgbot.handlers.user import register_user
from tgbot.middlewares.environment import EnvironmentMiddleware
from tgbot.models import models as db


logger = logging.getLogger(__name__)
config = load_dotenv()

messages = [
    "–ü–µ—Ä–≤–∞—è —Å—Ç–∞—Ç—å—è –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω–∞ –¥–ª—è –∞–±—Å–æ–ª—é—Ç–Ω—ã—Ö"
    "–Ω–æ–≤–∏—á–∫–æ–≤ –≤ –û–û–ü –Ω–∞ Python –∏ —Å–æ–¥–µ—Ä–∂–∏—Ç –æ—Å–Ω–æ–≤—ã"
    "–æ–±—ä–µ–∫—Ç–Ω–æ-–æ—Ä–∏–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è –Ω–∞ —è–∑—ã–∫–µ Python."
    "–í—Ç–æ—Ä–∞—è —Å—Ç–∞—Ç—å—è –æ–ø–∏—Å—ã–≤–∞–µ—Ç –∫–æ–Ω—Ü–µ–ø—Ü–∏–∏, –ø—Ä–∏–Ω—Ü–∏–ø—ã –∏ –ø—Ä–∏–º–µ—Ä—ã —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –û–û–ü –Ω–∞ Python."
    "–¢—Ä–µ—Ç—å—è —Å—Ç–∞—Ç—å—è —Å–æ–¥–µ—Ä–∂–∏—Ç –æ–±—â—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ–± –û–û–ü –∏" 
    "–º–æ–∂–µ—Ç –±—ã—Ç—å –ø–æ–ª–µ–∑–Ω–∞ –¥–ª—è –±–æ–ª–µ–µ –≥–ª—É–±–æ–∫–æ–≥–æ"
    "–ø–æ–Ω–∏–º–∞–Ω–∏—è —Ç–µ–º—ã.\n\n"
    "1. https://proglib.io/p/vvedenie-v-obektno-orientirovannoe-programmirovanie-oop-na-python-2020-07-23 \n"
    "2. https://proglib.io/p/python-oop \n"
    "3. https://habr.com/ru/hub/oop/ \n",

    "–ü–µ—Ä–≤–∞—è —Å—Ç–∞—Ç—å—è –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω–∞ –¥–ª—è –Ω–∞—á–∏–Ω–∞—é—â–∏—Ö –∏ —Å–æ–¥–µ—Ä–∂–∏—Ç –æ—Å–Ω–æ–≤—ã –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è –∫–æ–º–ø—å—é—Ç–µ—Ä–æ–≤ —Å –ø–æ–º–æ—â—å—é Python. \n"
    "–í—Ç–æ—Ä–∞—è —Å—Ç–∞—Ç—å—è —Å–æ–¥–µ—Ä–∂–∏—Ç —Å–ø–∏—Å–æ–∫ –±–µ—Å–ø–ª–∞—Ç–Ω—ã—Ö —Ä–µ—Å—É—Ä—Å–æ–≤ –¥–ª—è –∏–∑—É—á–µ–Ω–∏—è Python –Ω–∞ —Ä—É—Å—Å–∫–æ–º –∏ –∞–Ω–≥–ª–∏–π—Å–∫–æ–º —è–∑—ã–∫–∞—Ö. \n"
    "–¢—Ä–µ—Ç—å—è —Å—Ç–∞—Ç—å—è - —ç—Ç–æ –±–µ—Å–ø–ª–∞—Ç–Ω—ã–π –æ–Ω–ª–∞–π–Ω –∫—É—Ä—Å –ø–æ Python (–ø–∏—Ç–æ–Ω) –¥–ª—è –Ω–∞—á–∏–Ω–∞—é—â–∏—Ö –æ—Ç CodeBasics. \n\n"
    "1. https://www.coursera.org/learn/python-ru"
    "2. https://proglib.io/p/top-20-besplatnyh-resursov-dlya-izucheniya-python-sohrani-eto-v-zakladki-2021-01-08"
    "3. https://code-basics.com/ru/languages/python",
    
    "–ù–µ—Å–∫–æ–ª—å–∫–æ –∫—Ä–∞–π–Ω–µ –ø–æ–ª–µ–∑–Ω—ã—Ö —Å—Å—ã–ª–æ–∫ –¥–ª—è –Ω–∞—á–∏–Ω–∞—é—â–∏—Ö –ø–∏—Ç–æ–Ω–∏—Å—Ç–æ–≤. \n\n"
    "1. https://proglib.io/p/bystryy-samouchitel-kak-osvoit-python-za-30-minut-2021-01-11 \n"
    "2. https://skillbox.ru/media/code/kak-izuchit-python-samostoyatelno-i-besplatno/ \n"
    "3. https://ru.bitdegree.org/rukovodstvo/python-samouchitel/ \n"
    "4. https://python-scripts.com/learn-python \n",

    "–ò–Ω—Ç–µ—Ä–µ—Å–Ω–∞—è —Å—Ç–∞—Ç—å—è —Å –º–Ω–æ–∂–µ—Å—Ç–≤–æ–º –ø–æ–ª–µ–∑–Ω–æ–≥–æ –¥–ª—è Pyhton-Dev:\n"
    "https://pythonworld.ru/samouchitel-python",

    "–û—Ñ–∏—Ü–∏–∞–ª—å–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è Python - –≤–µ–ª–∏–∫–æ–ª–µ–ø–Ω—ã–π –∏—Å—Ç–æ—á–Ω–∏–∫ –º—É–¥—Ä–æ—Å—Ç–∏," 
    "–Ω–µ–ø–æ—Å—Ä–µ–¥—Å—Ç–≤–µ–Ω–Ω–æ –æ—Ç —Å–æ–∑–¥–∞—Ç–µ–ª–µ–π Python! –ó–¥–µ—Å—å –≤—ã –Ω–∞–π–¥–µ—Ç–µ –ø–æ–ª–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ —è–∑—ã–∫—É,"
    "–±–∏–±–ª–∏–æ—Ç–µ–∫–∞–º –∏ –º–æ–¥—É–ª—è–º. –ü–æ—Ä–∞–∂–∞—é—â–µ–µ —Ä–∞–∑–Ω–æ–æ–±—Ä–∞–∑–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏, –¥–æ—Å—Ç–æ–π–Ω–æ–µ –ø–æ—Ö–≤–∞–ª—ã!\n"
    "–°—Å—ã–ª–∫–∞: [–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è Python](https://docs.python.org/3/)\n\n",

    "Real Python - –≤—ã—Å–æ–∫–æ–∫–ª–∞—Å—Å–Ω—ã–π —Ä–µ—Å—É—Ä—Å —Å –±–æ–ª—å—à–∏–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º —Å—Ç–∞—Ç–µ–π, —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤ "
    "–∏ –≤–∏–¥–µ–æ–∫—É—Ä—Å–æ–≤ –¥–ª—è –∏–∑—É—á–µ–Ω–∏—è Python. –ò—Ö –º–∞—Ç–µ—Ä–∏–∞–ª—ã —Å–Ω–∞–±–∂–µ–Ω—ã –æ–±—Ä–∞–∑—Ü–∞–º–∏ –∫–æ–¥–∞ –∏ –ø–æ—à–∞–≥–æ–≤—ã–º–∏ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º–∏. "
    "–ß–∏—Å—Ç—ã–π –±—Ä–∏–ª–ª–∏–∞–Ω—Ç!\n"
    "–°—Å—ã–ª–∫–∞: [Real Python](https://realpython.com/)\n\n",
    
    "Python.org - —Å–≤—è—Ç–∏–ª–∏—â–µ Python —Å —É–≤–ª–µ–∫–∞—Ç–µ–ª—å–Ω—ã–º–∏ –Ω–æ–≤–æ—Å—Ç—è–º–∏, —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–∞–º–∏ –∏ –º–Ω–æ–∂–µ—Å—Ç–≤–æ–º "
    "—Ä–µ—Å—É—Ä—Å–æ–≤ –¥–ª—è —É—á–∞—Å—Ç–∏—è –≤ —Å–æ–æ–±—â–µ—Å—Ç–≤–µ. –ï—Å–ª–∏ –≤—ã –∏—â–µ—Ç–µ —Å–≤–µ–∂–∏–µ –Ω–æ–≤–æ—Å—Ç–∏ –∏ –≤–∞–∂–Ω—ã–µ –∞–Ω–æ–Ω—Å—ã, "
    "–≤–∞–º —Å—Ç–æ–∏—Ç –∑–∞–≥–ª—è–Ω—É—Ç—å —Å—é–¥–∞. –ù–µ–∑–∞–º–µ–Ω–∏–º—ã–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –≤ –±–∏—Ç–≤–µ —Å –Ω–µ–≤–µ–¥–µ–Ω–∏–µ–º!\n"
    "–°—Å—ã–ª–∫–∞: [Python.org](https://www.python.org/)\n\n"
    
    "Stack Overflow - –ª–µ–≥–µ–Ω–¥–∞—Ä–Ω—ã–π —Ñ–æ—Ä—É–º –ø—Ä–æ–≥—Ä–∞–º–º–∏—Å—Ç–æ–≤, –≥–¥–µ –≤—ã –º–æ–∂–µ—Ç–µ –∑–∞–¥–∞–≤–∞—Ç—å –≤–æ–ø—Ä–æ—Å—ã "
    "–∏ –Ω–∞—Ö–æ–¥–∏—Ç—å –æ—Ç–≤–µ—Ç—ã –Ω–∞ –≤—Å–µ –≤–∞—à–∏ –ø—Ä–æ–±–ª–µ–º—ã. –ú–Ω–æ–∂–µ—Å—Ç–≤–æ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤, –≥–æ—Ç–æ–≤—ã—Ö –ø–æ–º–æ—á—å, "
    "–∏ –æ–≥—Ä–æ–º–Ω—ã–π –∞—Ä—Ö–∏–≤ –≤–æ–ø—Ä–æ—Å–æ–≤ –∏ –æ—Ç–≤–µ—Ç–æ–≤. –ó–¥–µ—Å—å –Ω–∏ –æ–¥–∏–Ω –≤–æ–ø—Ä–æ—Å –Ω–µ –æ—Å—Ç–∞–Ω–µ—Ç—Å—è –±–µ–∑ –≤–Ω–∏–º–∞–Ω–∏—è!\n"
    "–°—Å—ã–ª–∫–∞: [Stack Overflow](https://stackoverflow.com/)\n\n",
    
    "Python Weekly - –µ–∂–µ–Ω–µ–¥–µ–ª—å–Ω–∞—è –ø–æ–¥–±–æ—Ä–∫–∞ –Ω–æ–≤–æ—Å—Ç–µ–π, —Å—Ç–∞—Ç–µ–π, —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤ –∏ —Å–æ–±—ã—Ç–∏–π Python. "
    "–ë—ã—Ç—å –≤ –∫—É—Ä—Å–µ –ø–æ—Å–ª–µ–¥–Ω–∏—Ö —Ç—Ä–µ–Ω–¥–æ–≤ –∏ —Å–æ–±—ã—Ç–∏–π –≤ –º–∏—Ä–µ Python - –ª–µ–≥–∫–æ–µ –∑–∞–¥–∞–Ω–∏–µ "
    "—Å –ø–æ–º–æ—â—å—é —ç—Ç–æ–≥–æ –ø–∏—Å—å–º–∞. –ö–∞–∫ –º—É–∑—ã–∫–∞ –≤ —Ä–∞–¥–∏–æ–∞–∫—Ç–∏–≤–Ω–æ–º –º–∏—Ä–µ!\n"
    "–°—Å—ã–ª–∫–∞: [Python Weekly](https://www.pythonweekly.com/)\n\n"
    
    "Hitchhiker's Guide to Python - –ø—É—Ç–µ–≤–æ–¥–∏—Ç–µ–ª—å –ø–æ Python, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–º–æ–∂–µ—Ç –≤–∞–º "
    "–æ—Å–≤–æ–∏—Ç—å—Å—è –≤ –ø—É—Ç–∞–Ω–∏—Ü–µ –ø–∞–∫–µ—Ç–æ–≤, –ø—Ä–æ–µ–∫—Ç–æ–≤ –∏ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤. –ó–¥–µ—Å—å –≤—ã –Ω–∞–π–¥–µ—Ç–µ —Å–æ–≤–µ—Ç—ã –∏ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ "
    "–¥–ª—è —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–≥–æ –∏ –∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è. –ö–∞–∫ –≤–µ—Ä–Ω—ã–π –≥–∏–¥ –≤ –±–µ—Å–∫—Ä–∞–π–Ω–∏—Ö –ø—É—Å—Ç–æ—à–∞—Ö Python!\n"
    "–°—Å—ã–ª–∫–∞: [Hitchhiker's Guide to Python](https://docs.python-guide.org/)\n\n",
    
    "–°—Ç—Ä–∞–Ω–∏—Ü–∞ Python –Ω–∞ —Ä–µ—Å—É—Ä—Å–µ Toster - –º–µ—Å—Ç–æ, –≥–¥–µ –º–æ–∂–Ω–æ –∑–∞–¥–∞–≤–∞—Ç—å –≤–æ–ø—Ä–æ—Å—ã –∏ –Ω–∞—Ö–æ–¥–∏—Ç—å –æ—Ç–≤–µ—Ç—ã "
    "–ø–æ —Ä–∞–∑–ª–∏—á–Ω—ã–º –∞—Å–ø–µ–∫—Ç–∞–º Python. –ó–¥–µ—Å—å —Å–æ–±—Ä–∞–Ω–∞ –æ–±—à–∏—Ä–Ω–∞—è –±–∞–∑–∞ –∑–Ω–∞–Ω–∏–π –∏ –æ–ø—ã—Ç–Ω—ã—Ö —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤. "
    "–û—â—É—Ç–∏—Ç–µ –∏—Å—Ç–∏–Ω–Ω—ã–π –≤–∫—É—Å –∑–Ω–∞–Ω–∏–π –Ω–∞ —ç—Ç–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ!\n"
    "–°—Å—ã–ª–∫–∞: [Python –Ω–∞ Toster](https://toster.ru/tag/python)\n\n",
    
    "–•–∞–±—Ä - –ø–æ–ø—É–ª—è—Ä–Ω—ã–π IT-—Ä–µ—Å—É—Ä—Å —Å –º–Ω–æ–∂–µ—Å—Ç–≤–æ–º —Å—Ç–∞—Ç–µ–π –∏ –æ–±—Å—É–∂–¥–µ–Ω–∏–π –ø–æ —Ä–∞–∑–Ω—ã–º —Ç–µ–º–∞–º, "
    "–≤–∫–ª—é—á–∞—è Python. –ó–¥–µ—Å—å –≤—ã –Ω–∞–π–¥–µ—Ç–µ –ø–æ–ª–µ–∑–Ω—ã–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã, —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–∞ –∏ —Å–æ–≤–µ—Ç—ã –æ—Ç –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª–æ–≤. "
    "–ò–∑–æ–±–∏–ª–∏–µ –∑–Ω–∞–Ω–∏–π, –∫–æ—Ç–æ—Ä–æ–µ –æ–∂–∏–¥–∞–µ—Ç –≤–∞—Å –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–∞—Ö –•–∞–±—Ä–∞!\n"
    "–°—Å—ã–ª–∫–∞: [–•–∞–±—Ä](https://habr.com/ru/hub/python/)\n\n",
    
    "Pythonworld - —Ä—É—Å—Å–∫–æ—è–∑—ã—á–Ω—ã–π –ø–æ—Ä—Ç–∞–ª –æ Python, –≥–¥–µ —Å–æ–±—Ä–∞–Ω—ã —Å—Ç–∞—Ç—å–∏, —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–∞ –∏ —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫–∏ "
    "–ø–æ —Ä–∞–∑–Ω—ã–º –∞—Å–ø–µ–∫—Ç–∞–º —è–∑—ã–∫–∞. –ó–¥–µ—Å—å –≤—ã –Ω–∞–π–¥–µ—Ç–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –±–∞–∑–æ–≤—ã—Ö –∏ –ø—Ä–æ–¥–≤–∏–Ω—É—Ç—ã—Ö —Ç–µ–º–∞—Ö Python. "
    "–ü—Ä–∏—Å–æ–µ–¥–∏–Ω—è–π—Ç–µ—Å—å –∫ –ø—É—Ç–µ—à–µ—Å—Ç–≤–∏—é –≤ –º–∏—Ä Python –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ Pythonworld!\n"
    "–°—Å—ã–ª–∫–∞: [Pythonworld](https://pythonworld.ru/)\n\n"
    
    "Proglib - —Ä–µ—Å—É—Ä—Å —Å –±–æ–ª—å—à–∏–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º —Å—Ç–∞—Ç–µ–π –∏ —É—Ä–æ–∫–æ–≤ –ø–æ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—é –Ω–∞ Python. "
    "–ó–¥–µ—Å—å –≤—ã –Ω–∞–π–¥–µ—Ç–µ –æ–±–∑–æ—Ä—ã –±–∏–±–ª–∏–æ—Ç–µ–∫, –ø—Ä–∏–º–µ—Ä—ã –∫–æ–¥–∞ –∏ –∏–Ω—Ç–µ—Ä–µ—Å–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è. –û–¥–∏–Ω —à–∞–≥ - –∏ –≤—ã –≤ –º–∏—Ä–µ Proglib!\n"
    "–°—Å—ã–ª–∫–∞: [Proglib](https://proglib.io/p/python)\n\n",
    
    "Python-scripts - —Å–∞–π—Ç, –≥–¥–µ —Å–æ–±—Ä–∞–Ω—ã –ø—Ä–∏–º–µ—Ä—ã –∏ —Å–∫—Ä–∏–ø—Ç—ã –Ω–∞ Python –¥–ª—è —Ä–∞–∑–ª–∏—á–Ω—ã—Ö –∑–∞–¥–∞—á. "
    "–ó–¥–µ—Å—å –≤—ã –Ω–∞–π–¥–µ—Ç–µ –∏—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥ –∏ –æ–ø–∏—Å–∞–Ω–∏—è –∫ –ø—Ä–∏–º–µ—Ä–∞–º, –∫–æ—Ç–æ—Ä—ã–µ –ø–æ–º–æ–≥—É—Ç –≤–∞–º —Ä–∞–∑–æ–±—Ä–∞—Ç—å—Å—è –≤ —Ä–∞–∑–Ω—ã—Ö –∞—Å–ø–µ–∫—Ç–∞—Ö Python. "
    "–£–∑–Ω–∞–π—Ç–µ –±–æ–ª—å—à–µ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ Python-scripts!\n"
    "–°—Å—ã–ª–∫–∞: [Python-scripts](https://python-scripts.com/)\n\n"
    
    "–•–æ—Ä–æ—à–∏–π –ø—Ä–æ–≥—Ä–∞–º–º–∏—Å—Ç - –±–ª–æ–≥ —Å –ø–æ–ª–µ–∑–Ω—ã–º–∏ —Å—Ç–∞—Ç—å—è–º–∏ –∏ —É—Ä–æ–∫–∞–º–∏ –ø–æ Python. –ó–¥–µ—Å—å –≤—ã –Ω–∞–π–¥–µ—Ç–µ "
    "–∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —è–∑—ã–∫–µ, –±–∏–±–ª–∏–æ—Ç–µ–∫–∞—Ö –∏ —Å–æ–≤–µ—Ç—ã –ø–æ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ. –ü—Ä–æ–∫–∞—á–∞–π—Ç–µ —Å–≤–æ–∏ –Ω–∞–≤—ã–∫–∏ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ –•–æ—Ä–æ—à–µ–≥–æ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Å—Ç–∞!\n"
    "–°—Å—ã–ª–∫–∞: [–•–æ—Ä–æ—à–∏–π –ø—Ä–æ–≥—Ä–∞–º–º–∏—Å—Ç](https://goodprogrammer.ru/tag/python)\n\n",
    
    "Pythonist - –ø–æ—Ä—Ç–∞–ª —Å —É—Ä–æ–∫–∞–º–∏ –∏ —Å—Ç–∞—Ç—å—è–º–∏ –¥–ª—è –∏–∑—É—á–µ–Ω–∏—è Python. –ó–¥–µ—Å—å –≤—ã –Ω–∞–π–¥–µ—Ç–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã "
    "–ø–æ –æ—Å–Ω–æ–≤–∞–º, –ø—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–º —Ç–µ–º–∞–º –∏ —Ä–∞–∑–ª–∏—á–Ω—ã–º –æ–±–ª–∞—Å—Ç—è–º –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è Python. –ü–æ–≥—Ä—É–∑–∏—Ç–µ—Å—å –≤ –º–∏—Ä Python –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ Pythonist!\n"
    "–°—Å—ã–ª–∫–∞: [Pythonist](https://pythonist.ru/)\n\n",
    
    "WebDev - —Ä–µ—Å—É—Ä—Å, –ø–æ—Å–≤—è—â–µ–Ω–Ω—ã–π –≤–µ–±-—Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ, –≤–∫–ª—é—á–∞—è Python –∏ –µ–≥–æ —Ñ—Ä–µ–π–º–≤–æ—Ä–∫–∏. –ó–¥–µ—Å—å –≤—ã –Ω–∞–π–¥–µ—Ç–µ "
    "—Å—Ç–∞—Ç—å–∏, —É—Ä–æ–∫–∏ –∏ —Å–æ–≤–µ—Ç—ã –ø–æ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π –Ω–∞ Python. –†–∞—Å–∫—Ä–æ–π—Ç–µ —Å–≤–æ–π –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ WebDev!\n"
    "–°—Å—ã–ª–∫–∞: [WebDev](https://webdevblog.ru/tag/python/)\n\n"
    
    "Pythonworld - –±–ª–æ–≥ —Å –ø–æ–ª–µ–∑–Ω—ã–º–∏ —Å—Ç–∞—Ç—å—è–º–∏ –∏ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–∞–º–∏ –¥–ª—è –ø—Ä–æ–≥—Ä–∞–º–º–∏—Å—Ç–æ–≤ –Ω–∞ Python. –ó–¥–µ—Å—å –≤—ã –Ω–∞–π–¥–µ—Ç–µ "
    "–∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —è–∑—ã–∫–µ, –±–∏–±–ª–∏–æ—Ç–µ–∫–∞—Ö, —Ñ—Ä–µ–π–º–≤–æ—Ä–∫–∞—Ö –∏ –ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–∏–º–µ—Ä—ã. –†–∞—Å—à–∏—Ä—å—Ç–µ —Å–≤–æ–∏ –≥–æ—Ä–∏–∑–æ–Ω—Ç—ã –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ Pythonworld!\n"
    "–°—Å—ã–ª–∫–∞: [Pythonworld](https://pythonworld.ru/)\n\n",
    
    "Python-club - —Ä—É—Å—Å–∫–æ—è–∑—ã—á–Ω—ã–π –ø–æ—Ä—Ç–∞–ª –¥–ª—è –ø—Ä–æ–≥—Ä–∞–º–º–∏—Å—Ç–æ–≤ –Ω–∞ Python. –ó–¥–µ—Å—å –≤—ã –Ω–∞–π–¥–µ—Ç–µ —Å—Ç–∞—Ç—å–∏, "
    "—É—Ä–æ–∫–∏, –Ω–æ–≤–æ—Å—Ç–∏ –∏ –∏–Ω—Ç–µ—Ä–µ—Å–Ω—ã–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã –ø–æ —Ä–∞–∑–ª–∏—á–Ω—ã–º –∞—Å–ø–µ–∫—Ç–∞–º —è–∑—ã–∫–∞. –ü—Ä–∏—Å–æ–µ–¥–∏–Ω—è–π—Ç–µ—Å—å –∫ Python-–∫–ª—É–±—É!\n"
    "–°—Å—ã–ª–∫–∞: [Python-club](https://python-club.ru/)\n\n",


    "–û—Ñ–∏—Ü–∏–∞–ª—å–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è FastAPI - –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–π –∏—Å—Ç–æ—á–Ω–∏–∫ –∑–Ω–∞–Ω–∏–π –æ —Ñ—Ä–µ–π–º–≤–æ—Ä–∫–µ FastAPI, "
    "—Ä–∞–∑—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã–π –∞–≤—Ç–æ—Ä–æ–º —Å–∞–º–æ–≥–æ FastAPI, –°–µ–±–∞—Å—Ç—å—è–Ω–æ–º –†–∞–º–∏—Ä–µ–∑–æ–º. –ó–¥–µ—Å—å –≤—ã –Ω–∞–π–¥–µ—Ç–µ –ø–æ–ª–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ, "
    "–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é –ø–æ —Ñ—É–Ω–∫—Ü–∏—è–º, –º–æ–¥–µ–ª—è–º –∏ —Å—Ö–µ–º–∞–º, –∞ —Ç–∞–∫–∂–µ –º–Ω–æ–∂–µ—Å—Ç–≤–æ –ø—Ä–∏–º–µ—Ä–æ–≤. –í–∞—à –Ω–∞–¥–µ–∂–Ω—ã–π –ø—É—Ç–µ–≤–æ–¥–∏—Ç–µ–ª—å –≤ –º–∏—Ä–µ FastAPI!\n"
    "–°—Å—ã–ª–∫–∞: [–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è FastAPI](https://fastapi.tiangolo.com/ru/)\n\n",
    
    "FastAPI - –º–æ–¥–µ—Ä–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Ñ—Ä–µ–π–º–≤–æ—Ä–∫ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π –Ω–∞ Python. –í —ç—Ç–æ–π —Å—Ç–∞—Ç—å–µ –≤—ã —É–∑–Ω–∞–µ—Ç–µ, "
    "—á—Ç–æ —Ç–∞–∫–æ–µ FastAPI –∏ –∫–∞–∫ –æ–Ω –æ—Ç–ª–∏—á–∞–µ—Ç—Å—è –æ—Ç –¥—Ä—É–≥–∏—Ö —Ñ—Ä–µ–π–º–≤–æ—Ä–∫–æ–≤. –ì–æ—Ç–æ–≤—å—Ç–µ—Å—å –∫ –≤–µ–ª–∏–∫–æ–ª–µ–ø–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ —Å FastAPI!\n"
    "–°—Å—ã–ª–∫–∞: [FastAPI](https://ru.wikipedia.org/wiki/FastAPI)\n\n",

    "Roadmap.sh - Roadmap.sh –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –æ–±—à–∏—Ä–Ω—É—é –∫–æ–ª–ª–µ–∫—Ü–∏—é roadmap'–æ–≤ –¥–ª—è —Ä–∞–∑–ª–∏—á–Ω—ã—Ö –æ–±–ª–∞—Å—Ç–µ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏, –≤–∫–ª—é—á–∞—è –≤–µ–±-—Ä–∞–∑—Ä–∞–±–æ—Ç–∫—É, "
    "–º–æ–±–∏–ª—å–Ω—É—é —Ä–∞–∑—Ä–∞–±–æ—Ç–∫—É, –º–∞—à–∏–Ω–Ω–æ–µ –æ–±—É—á–µ–Ω–∏–µ, –∫–∏–±–µ—Ä–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –∏ –º–Ω–æ–≥–æ–µ –¥—Ä—É–≥–æ–µ. –í—ã–±–µ—Ä–∏—Ç–µ –Ω—É–∂–Ω—É—é –æ–±–ª–∞—Å—Ç—å –∏ —Å–ª–µ–¥—É–π—Ç–µ –ø–æ—à–∞–≥–æ–≤—ã–º –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º, "
    "—á—Ç–æ–±—ã –¥–æ—Å—Ç–∏—á—å —Å–≤–æ–∏—Ö —Ü–µ–ª–µ–π.\n"
    "–°—Å—ã–ª–∫–∞: [Roadmap.sh](https://roadmap.sh/)\n\n",
    
    
    "DevRoadmap - DevRoadmap –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –ø–æ–¥—Ä–æ–±–Ω—ã–µ roadmap'—ã –¥–ª—è —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —è–∑—ã–∫–æ–≤ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è, —Ñ—Ä–µ–π–º–≤–æ—Ä–∫–æ–≤, "
    "–±–∏–±–ª–∏–æ—Ç–µ–∫ –∏ –¥—Ä—É–≥–∏—Ö —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π. –ó–¥–µ—Å—å –≤—ã –Ω–∞–π–¥–µ—Ç–µ –¥–µ—Ç–∞–ª—å–Ω—ã–µ –ø—É—Ç–∏ –æ–±—É—á–µ–Ω–∏—è –∏ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ —Ä–∞–∑–≤–∏—Ç–∏—é –Ω–∞–≤—ã–∫–æ–≤ –≤ –≤—ã–±—Ä–∞–Ω–Ω—ã—Ö –æ–±–ª–∞—Å—Ç—è—Ö.\n"
    "–°—Å—ã–ª–∫–∞: [DevRoadmap](https://devroadmap.io/)\n\n",
    
    
    "CodePath - CodePath –ø—Ä–µ–¥–ª–∞–≥–∞–µ—Ç roadmap'—ã –¥–ª—è —Å—Ç—É–¥–µ–Ω—Ç–æ–≤ –∏ –Ω–∞—á–∏–Ω–∞—é—â–∏—Ö —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ –ø–æ —Ä–∞–∑–ª–∏—á–Ω—ã–º –æ–±–ª–∞—Å—Ç—è–º —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏, "
    "–≤–∫–ª—é—á–∞—è –º–æ–±–∏–ª—å–Ω—É—é —Ä–∞–∑—Ä–∞–±–æ—Ç–∫—É, –≤–µ–±-—Ä–∞–∑—Ä–∞–±–æ—Ç–∫—É, –∫–∏–±–µ—Ä–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–≥—Ä–∞–º–º–Ω–æ–≥–æ –æ–±–µ—Å–ø–µ—á–µ–Ω–∏—è. "
    "–ò–∑—É—á–∞–π—Ç–µ –∏ —Ä–∞–∑–≤–∏–≤–∞–π—Ç–µ—Å—å —Å CodePath!\n"
    "–°—Å—ã–ª–∫–∞: [CodePath](https://codepath.org/)\n\n",
    
    
    "Fullstack Roadmap - Fullstack Roadmap –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç roadmap –¥–ª—è —Ä–∞–∑–≤–∏—Ç–∏—è –Ω–∞–≤—ã–∫–æ–≤ –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω–æ–≥–æ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞. "
    "–ó–¥–µ—Å—å –≤—ã –Ω–∞–π–¥–µ—Ç–µ –ø—É—Ç–∏ –æ–±—É—á–µ–Ω–∏—è –∏ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –∏–∑—É—á–µ–Ω–∏—é —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞, –±—ç–∫–µ–Ω–¥–∞, –±–∞–∑ –¥–∞–Ω–Ω—ã—Ö –∏ –¥—Ä—É–≥–∏—Ö –∫–ª—é—á–µ–≤—ã—Ö —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π. "
    "–ò–¥–∏—Ç–µ –∫ –ø–æ–ª–Ω–æ–º—É —Å—Ç–µ–∫—É —Å Fullstack Roadmap!\n"
    "–°—Å—ã–ª–∫–∞: [Fullstack Roadmap](https://github.com/kamranahmedse/developer-roadmap)\n\n"
    
    
    "Open Source Society University - Open Source Society University –ø—Ä–µ–¥–ª–∞–≥–∞–µ—Ç roadmap'—ã –¥–ª—è —Å–∞–º–æ–æ–±—É—á–µ–Ω–∏—è –≤ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö –æ–±–ª–∞—Å—Ç—è—Ö "
    "—Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –∏ –∫–æ–º–ø—å—é—Ç–µ—Ä–Ω—ã—Ö –Ω–∞—É–∫. –ó–¥–µ—Å—å –≤—ã –Ω–∞–π–¥–µ—Ç–µ –ø—É—Ç–∏ –¥–ª—è –∏–∑—É—á–µ–Ω–∏—è —Ç–∞–∫–∏—Ö —Ç–µ–º, –∫–∞–∫ –∞–ª–≥–æ—Ä–∏—Ç–º—ã, –æ–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Å–∏—Å—Ç–µ–º—ã, "
    "—Å–µ—Ç–∏, –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –∏ –º–Ω–æ–≥–æ–µ –¥—Ä—É–≥–æ–µ. –°—Ç–∞–Ω—å—Ç–µ —Å—Ç—É–¥–µ–Ω—Ç–æ–º Open Source Society University!\n"
    "–°—Å—ã–ª–∫–∞: [Open Source Society University](https://github.com/ossu/computer-science)\n\n",

]


async def start():
    db.sql_start()
    logger.info("–ë–æ—Ç –∑–∞–ø—É—â–µ–Ω")
    logger.info("–°–æ–∑–¥–∞–Ω–∏–µ —Ç–∞–±–ª–∏—Ü –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö –≤—ã–ø–æ–ª–Ω–µ–Ω–æ")


selected_messages = []


async def send_posts(bot):
    print("–æ—Ç–ø—Ä–∞–≤–∫–∞ –ø–æ—Å—Ç–æ–≤!")
    while True:
        try:
            print(len(messages))
            # –ü—Ä–æ–≤–µ—Ä—è–µ–º, –≤—Å–µ –ª–∏ —Å–æ–æ–±—â–µ–Ω–∏—è –±—ã–ª–∏ —É–∂–µ –≤—ã–±—Ä–∞–Ω—ã
            if len(selected_messages) == len(messages):

                # –ï—Å–ª–∏ –≤—Å–µ —Å–æ–æ–±—â–µ–Ω–∏—è –±—ã–ª–∏ –≤—ã–±—Ä–∞–Ω—ã, —Å–±—Ä–∞—Å—ã–≤–∞–µ–º —Å–ø–∏—Å–æ–∫ –≤—ã–±—Ä–∞–Ω–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π
                await bot.send_message(-1001929746261, "–û–∂–∏–¥–∞–π—Ç–µ —Å–ª–µ–¥—É—é—â–∏—Ö –ø–æ—Å—Ç–æ–≤!")


            # –í—ã–±–∏—Ä–∞–µ–º —Å–ª—É—á–∞–π–Ω—ã–π —ç–ª–µ–º–µ–Ω—Ç –∏–∑ —Å–ø–∏—Å–∫–∞, –∏—Å–∫–ª—é—á–∞—è —É–∂–µ –≤—ã–±—Ä–∞–Ω–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è
            message = random.choice(list(set(messages) - set(selected_messages)))

            # –î–æ–±–∞–≤–ª—è–µ–º –≤—ã–±—Ä–∞–Ω–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –≤ —Å–ø–∏—Å–æ–∫ –≤—ã–±—Ä–∞–Ω–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π
            selected_messages.append(message)
            await asyncio.sleep(86400)

            await bot.send_message(-1001929746261, message)
        except Exception as e:
            logger.error(e)


async def send_polly(bot):
    # –°–æ–∑–¥–∞–Ω–∏–µ –æ–±—ä–µ–∫—Ç–∞ –≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏—è
    msg = (
        "üåü –ü—Ä–æ–≥—Ä–∞–º–º–∏—Å—Ç—ã, —Å–æ–±–∏—Ä–∞–µ–º—Å—è –ª–∏ –º—ã –Ω–∞ –æ—Ñ—Ñ–ª–∞–π–Ω-–≤—Å—Ç—Ä–µ—á—É? üåü\n\n"
        "üíª –≠–ª–µ–∫—Ç—Ä–æ–Ω–Ω—ã–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ –∏ –æ–Ω–ª–∞–π–Ω-—Å–≤—è–∑—å ‚Äì –Ω–∞—à–∞ –ø–æ–≤—Å–µ–¥–Ω–µ–≤–Ω–æ—Å—Ç—å.\n"
        "–ù–æ –º–æ–∂–µ—Ç –±—ã—Ç—å, –ø–æ—Ä–∞ –æ—Ç–æ—Ä–≤–∞—Ç—å—Å—è –æ—Ç –∫–æ–¥–∞ "
        "–∏ –≤—Å—Ç—Ä–µ—Ç–∏—Ç—å—Å—è –≤ —Ä–µ–∞–ª—å–Ω–æ–º –º–∏—Ä–µ? üåç\n\n"
        "–ø–æ—à—É—Ç–∏—Ç—å –æ –Ω–∞—à–∏—Ö –ª—é–±–∏–º—ã—Ö –±–∞–≥–∞—Ö. ü§£\n"
        "‚ùì –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç–µ –ª–∏ –≤—ã –∏–¥–µ—é –æ—Ñ—Ñ–ª–∞–π–Ω-–≤—Å—Ç—Ä–µ—á–∏ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Å—Ç–æ–≤? ü§ù\n\n"
    )
    while True:
        print("–æ—Ç–ø—Ä–∞–≤–∫–∞ –æ–ø—Ä–æ—Å–∞!")
        try:
            await asyncio.sleep(259200)
    # –û—Ç–ø—Ä–∞–≤–∫–∞ –≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏—è
            await bot.send_poll(
                -1001929746261,
                question=msg,
                options=[
                    ' –î–∞, —è –≥–æ—Ç–æ–≤(–∞) –≤—ã–π—Ç–∏ –∏–∑ —Å–≤–æ–µ–π –ø–µ—â–µ—Ä—ã –∏ —É–≤–∏–¥–µ—Ç—å –≤–∞—Å –≤—Å–µ—Ö –ª–∏—á–Ω–æ! ü•≥', 
                    '–ù–µ—Ç, —è —Å–ª–∏—à–∫–æ–º —É–≤–ª–µ—á–µ–Ω(–∞) —Å–≤–æ–∏–º –∫–æ–¥–æ–º, —á—Ç–æ–±—ã –≤—ã—Ö–æ–¥–∏—Ç—å –Ω–∞ —É–ª–∏—Ü—É. ü§ì',
                    '–ú–Ω–µ –≤—Å–µ —Ä–∞–≤–Ω–æ, —è –¥–æ–≤–æ–ª–µ–Ω(–∞) –∫–∞–∫ –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã–º–∏, —Ç–∞–∫ –∏ —Ä–µ–∞–ª—å–Ω—ã–º–∏ –≤—Å—Ç—Ä–µ—á–∞–º–∏. ü§∑‚Äç‚ôÄÔ∏è',
                ],
                type='regular',
                is_anonymous=True,
            )
            
        except Exception as e:
            logger.error(e)


def register_all_middlewares(dp, config):
    dp.setup_middleware(EnvironmentMiddleware(config=config))


def register_all_filters(dp):
    dp.filters_factory.bind(AdminFilter)


def register_all_handlers(dp):
    register_admin(dp)
    register_user(dp)

    register_echo(dp)


async def main():
    logging.basicConfig(
        level=logging.INFO,
        format=u'%(filename)s:%(lineno)d #%(levelname)-8s [%(asctime)s] - %(name)s - %(message)s',
    )
    logger.info("Starting bot")
    token = os.getenv('BOT_TOKEN')
    use_redis = False

    storage = RedisStorage2() if use_redis else MemoryStorage()
    bot = Bot(token=token, parse_mode='HTML')
    dp = Dispatcher(bot, storage=storage)

    bot['config'] = config

    register_all_middlewares(dp, config)
    register_all_filters(dp)
    register_all_handlers(dp)

    # start
    try:
        await start()
        asyncio.create_task(send_posts(bot))
        asyncio.create_task(send_polly(bot))
        await dp.start_polling()
    finally:
        await dp.storage.close()
        await dp.storage.wait_closed()
        await bot.session.close()


if __name__ == '__main__':
    try:
        asyncio.run(main())
    except (KeyboardInterrupt, SystemExit):
        logger.error("Bot stopped!")
